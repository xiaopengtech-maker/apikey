<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>API Key Manager</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f4; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; }
        h2 { color: #555; border-bottom: 2px solid #007bff; padding-bottom: 5px; }
        form { margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 10px; align-items: end; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select { padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 200px; }
        button { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        button[type="submit"] { background-color: #007bff; color: white; }
        button[type="submit"]:hover { background-color: #0056b3; }
        #cancelBtn { background-color: #6c757d; color: white; }
        #cancelBtn:hover { background-color: #545b62; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #007bff; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        tr:hover { background-color: #f1f1f1; }
        .actions button { margin-right: 5px; padding: 5px 10px; font-size: 12px; }
        .edit-btn { background-color: #ffc107; color: black; }
        .edit-btn:hover { background-color: #e0a800; }
        .delete-btn { background-color: #dc3545; color: white; }
        .delete-btn:hover { background-color: #c82333; }
        #checkForm { margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 4px; }
        #checkResult { margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>API Key Manager</h1>

        <form id="keyForm">
            <div>
                <label>Key: <input type="text" id="keyInput" required></label>
            </div>
            <div>                <input type="hidden" id="editId">
            </div>
            <div>                <label>Expiration:
                    <select id="expType" onchange="toggleDate(this)">
                        <option value="permanent">Permanent</option>
                        <option value="date">Date</option>
                    </select>
                </label>
            </div>
            <div>
                <input type="date" id="expDate" style="display: none;">
            </div>
            <div>
                <button type="submit" id="submitBtn">Add Key</button>
                <button type="button" id="cancelBtn" style="display: none;" onclick="cancelEdit()">Cancel</button>
            </div>
        </form>

        <h2>Keys</h2>
        <table id="keysTable">
            <tr><th>ID</th><th>Key</th><th>Expiration</th><th>Actions</th></tr>
        </table>

        <h2>Check Key</h2>
        <form id="checkForm">
            <label>Key: <input type="text" id="checkKey" required></label>
            <button type="submit">Check</button>
        </form>
        <p id="checkResult"></p>
    </div>

    <script>
        let keys = JSON.parse(localStorage.getItem('keys')) || [];
        let nextId = keys.length ? Math.max(...keys.map(k => k.id)) + 1 : 1;

        function renderTable() {
            let html = '<tr><th>ID</th><th>Key</th><th>Expiration</th><th>Actions</th></tr>';
            keys.forEach(key => {
                html += `<tr>
                    <td>${key.id}</td>
                    <td>${key.key}</td>
                    <td>${key.expiration}</td>
                    <td>
                        <button class="edit-btn" onclick="editKey(${key.id})">Edit</button>
                        <button class="delete-btn" onclick="deleteKey(${key.id})">Delete</button>
                    </td>
                </tr>`;
            });
            document.getElementById('keysTable').innerHTML = html;
            localStorage.setItem('keys', JSON.stringify(keys));
        }

        function toggleDate(sel) {
            if (!sel) sel = document.getElementById('expType');
            const expDate = document.getElementById('expDate');
            if (sel.value === 'date') {
                expDate.style.display = 'inline';
                expDate.required = true;
            } else {
                expDate.style.display = 'none';
                expDate.required = false;
            }
        }

        document.getElementById('keyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const id = document.getElementById('editId').value;
            const key = document.getElementById('keyInput').value;
            const expType = document.getElementById('expType').value;
            const expiration = expType === 'permanent' ? 'permanent' : document.getElementById('expDate').value;

            if (id) {
                const idx = keys.findIndex(k => k.id == id);
                keys[idx] = { id: parseInt(id), key, expiration };
            } else {
                keys.push({ id: nextId++, key, expiration });
            }
            renderTable();
            this.reset();
            document.getElementById('editId').value = '';
            document.getElementById('submitBtn').textContent = 'Add Key';
            document.getElementById('cancelBtn').style.display = 'none';
        });

        function editKey(id) {
            const key = keys.find(k => k.id == id);
            document.getElementById('editId').value = id;
            document.getElementById('keyInput').value = key.key;
            const expType = document.getElementById('expType');
            expType.value = key.expiration === 'permanent' ? 'permanent' : 'date';
            toggleDate(expType);
            if (key.expiration !== 'permanent') {
                document.getElementById('expDate').value = key.expiration;
            }
            document.getElementById('submitBtn').textContent = 'Update Key';
            document.getElementById('cancelBtn').style.display = 'inline';
        }

        function cancelEdit() {
            document.getElementById('keyForm').reset();
            document.getElementById('editId').value = '';
            document.getElementById('submitBtn').textContent = 'Add Key';
            document.getElementById('cancelBtn').style.display = 'none';
            toggleDate(document.getElementById('expType'));
        }

        function deleteKey(id) {
            if (confirm('Delete key?')) {
                keys = keys.filter(k => k.id != id);
                renderTable();
            }
        }

        document.getElementById('checkForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const checkKey = document.getElementById('checkKey').value;
            const result = document.getElementById('checkResult');
            const key = keys.find(k => k.key === checkKey);
            if (!key) {
                result.textContent = 'Key not found.';
                return;
            }
            if (key.expiration === 'permanent') {
                result.textContent = 'Key is valid (permanent).';
            } else if (new Date(key.expiration) > new Date()) {
                result.textContent = 'Key is valid.';
            } else {
                result.textContent = 'Key has expired.';
            }
        });

        renderTable();
    </script>
</body>
</html>
